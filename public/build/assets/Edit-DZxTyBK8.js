import{r as s,u as v,j as e,H as N}from"./app-DOf07KBw.js";import{A as w}from"./AuthenticatedLayout-BeXETAE6.js";import"./ApplicationLogo-JOvcJtei.js";import"./transition-CF2oV1xV.js";function F({course:a}){const[o,n]=s.useState([]),[u,h]=s.useState(!0),[l,c]=s.useState(null),[y,m]=s.useState([]),[b,f]=s.useState(!0),[g,x]=s.useState(null),{data:d,setData:i,put:k,processing:p,errors:t}=v({name:a.name||"",code:a.code||"",description:a.description||"",delivery_type:a.delivery_type||"office",country:a.country||"",city:a.city||"",trainer_id:a.trainer_id||"",coordinator_id:a.coordinator_id||"",location_id:a.location_id||"",location_details:a.location_details||""});s.useEffect(()=>{h(!0),c(null),fetch("/api/trainers").then(r=>{if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return r.json()}).then(r=>{r&&r.data&&Array.isArray(r.data)?n(r.data):(n([]),c("Invalid trainer data received"))}).catch(r=>{console.error("Error fetching trainers:",r),c("Failed to load trainers"),n([])}).finally(()=>{h(!1)})},[]),s.useEffect(()=>{f(!0),x(null),fetch("/course-location-management/api/list").then(r=>{if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return r.json()}).then(r=>{r&&r.data&&Array.isArray(r.data)?m(r.data):(m([]),x("Invalid location data received"))}).catch(r=>{console.error("Error fetching locations:",r),x("Failed to load locations"),m([])}).finally(()=>{f(!1)})},[]);const j=r=>{r.preventDefault(),k(route("courses.update",a.id))};return e.jsxs(w,{header:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:["✏️ Edit Course: ",a.name]})}),children:[e.jsx(N,{title:"Edit Course"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsx("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Course Name *"}),e.jsx("input",{type:"text",id:"name",value:d.name,onChange:r=>i("name",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",required:!0}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Course Code"}),e.jsx("input",{type:"text",id:"code",value:d.code,onChange:r=>i("code",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"}),t.code&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.code})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),e.jsx("textarea",{id:"description",rows:3,value:d.description,onChange:r=>i("description",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"}),t.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.description})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"delivery_type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Delivery Type *"}),e.jsxs("select",{id:"delivery_type",value:d.delivery_type,onChange:r=>i("delivery_type",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",required:!0,children:[e.jsx("option",{value:"office",children:"Office"}),e.jsx("option",{value:"offsite",children:"Offsite"}),e.jsx("option",{value:"abroad",children:"Abroad"})]}),t.delivery_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.delivery_type})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Country"}),e.jsx("input",{type:"text",id:"country",value:d.country,onChange:r=>i("country",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"}),t.country&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.country})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"City"}),e.jsx("input",{type:"text",id:"city",value:d.city,onChange:r=>i("city",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm"}),t.city&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.city})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"📍 Course Location"}),b&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading locations..."})]}),g&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["⚠️ ",g,". Please refresh the page or try again later."]})}),!b&&!g&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Training Location"}),e.jsxs("select",{id:"location_id",value:d.location_id,onChange:r=>i("location_id",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",children:[e.jsx("option",{value:"",children:"Select Training Location"}),Array.isArray(y)&&y.map(r=>e.jsxs("option",{value:r.id,children:["📍"," ",r.name," ","-"," ",r.city,","," ",r.country]},r.id))]}),t.location_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.location_id})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location_details",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Additional Location Details"}),e.jsx("input",{type:"text",id:"location_details",value:d.location_details,onChange:r=>i("location_details",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm",placeholder:"e.g., Building A, Floor 3, Room 301",disabled:!d.location_id}),t.location_details&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.location_details})]})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"💡 Select a training location from your configured locations. You can also add specific details like room numbers or building information."})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"👨‍🏫 Trainer Assignment"}),u&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading trainers..."})]}),l&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:["⚠️ ",l,". Please refresh the page or try again later."]})}),!u&&!l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"trainer_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Main Trainer"}),e.jsxs("select",{id:"trainer_id",value:d.trainer_id,onChange:r=>i("trainer_id",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-indigo-600 dark:focus:ring-indigo-600",children:[e.jsx("option",{value:"",children:"Select Main Trainer"}),Array.isArray(o)&&o.map(r=>e.jsxs("option",{value:r.id,children:[r.full_name," ","-"," ",r.position]},r.id))]}),t.trainer_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.trainer_id})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"coordinator_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Course Coordinator"}),e.jsxs("select",{id:"coordinator_id",value:d.coordinator_id,onChange:r=>i("coordinator_id",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-indigo-600 dark:focus:ring-indigo-600",children:[e.jsx("option",{value:"",children:"Select Coordinator (Optional)"}),Array.isArray(o)&&o.map(r=>e.jsxs("option",{value:r.id,children:[r.full_name," ","-"," ",r.position]},r.id))]}),t.coordinator_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.coordinator_id})]})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"💡 Assign trainers to this course. The main trainer will lead the course, while the coordinator handles logistics and administration."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("a",{href:route("courses.index"),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:p?"Updating...":"Update Course"})]})]})})})})})]})}export{F as default};
