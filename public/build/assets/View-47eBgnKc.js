import{r as D,j as e,H as E,L as R}from"./app-BLl8wz7X.js";import{A as T}from"./AuthenticatedLayout-BBmj54qy.js";import{h as I,E as P}from"./html2canvas.esm-XlD5_zrL.js";import"./ApplicationLogo-CLUV3Fv9.js";import"./transition-B5m-iN7L.js";function W({certificate:t}){const[c,m]=D.useState(!1),d=D.useRef(null),n={title:{font_family:"Times New Roman",font_size:"3em",color:"#8b4513",position:{top:"20%",left:"50%"},text_align:"center"},subtitle:{font_family:"Times New Roman",font_size:"1.5em",color:"#34495e",position:{top:"35%",left:"50%"},text_align:"center"},participant_name:{font_family:"Times New Roman",font_size:"2.5em",color:"#2c3e50",position:{top:"45%",left:"50%"},text_align:"center",underline:!0,underline_color:"#e74c3c"},course_details:{font_family:"Times New Roman",font_size:"1.3em",color:"#34495e",position:{top:"60%",left:"50%"},text_align:"center"},company_name:{font_family:"Times New Roman",font_size:"1.2em",color:"#7f8c8d",position:{top:"70%",left:"50%"},text_align:"center",italic:!0},dates:{font_family:"Times New Roman",font_size:"1.1em",color:"#34495e",position:{top:"80%",left:"50%"},text_align:"center"},certificate_number:{font_family:"Times New Roman",font_size:"0.9em",color:"#7f8c8d",position:{bottom:"20px",right:"20px"},text_align:"right"}},x=(i,a)=>{const r={...i};for(const s in a)a[s]&&typeof a[s]=="object"&&!Array.isArray(a[s])?r[s]=x(i[s]||{},a[s]):r[s]=a[s];return r},C=x(n,t.customization||{}),o=i=>{var r,s,l,g,p,h,y,u,f,b,_,j,N,k,v,w;const a=C[i];return a?{fontFamily:a.font_family||((r=n[i])==null?void 0:r.font_family),fontSize:a.font_size||((s=n[i])==null?void 0:s.font_size),color:a.color||((l=n[i])==null?void 0:l.color),textAlign:a.text_align||((g=n[i])==null?void 0:g.text_align),position:"absolute",transform:"translate(-50%, -50%)",top:((p=a.position)==null?void 0:p.top)||((y=(h=n[i])==null?void 0:h.position)==null?void 0:y.top),left:((u=a.position)==null?void 0:u.left)||((b=(f=n[i])==null?void 0:f.position)==null?void 0:b.left),bottom:((_=a.position)==null?void 0:_.bottom)||((N=(j=n[i])==null?void 0:j.position)==null?void 0:N.bottom),right:((k=a.position)==null?void 0:k.right)||((w=(v=n[i])==null?void 0:v.position)==null?void 0:w.right),fontWeight:"bold",zIndex:10,...a.underline&&{textDecoration:"underline",textDecorationColor:a.underline_color||"#e74c3c",textDecorationThickness:"3px"},...a.italic&&{fontStyle:"italic"}}:{}},S=async()=>{if(d.current){m(!0);try{const i=await I(d.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"}),a=i.toDataURL("image/png"),r=new P("landscape","mm","a4"),s=297,l=i.height*s/i.width;r.addImage(a,"PNG",0,0,s,l),r.save(`certificate_${t.certificate_number}.pdf`)}catch(i){console.error("Error generating PDF:",i),alert("Error generating PDF. Please try again.")}finally{m(!1)}}},z=()=>{window.print()};return e.jsxs(T,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"üèÜ Certificate View"}),children:[e.jsx(E,{title:`Certificate: ${t.certificate_number}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx(R,{href:route("certificates.index"),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 cursor-pointer",children:"‚Üê Back to Certificates"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:z,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors cursor-pointer",children:"üñ®Ô∏è Print"}),e.jsx("button",{onClick:S,disabled:c,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:c?"‚è≥ Exporting...":"üìÑ Export PDF"})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{ref:d,className:"certificate-container bg-white shadow-2xl",style:{width:"842px",height:"595px",backgroundImage:t.background_image?`url(${t.background_image.startsWith("http")?t.background_image:`${window.location.origin}/storage/${t.background_image}`})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontFamily:'"Times New Roman", serif',color:"#2c3e50",padding:"40px",boxSizing:"border-box"},children:[e.jsxs("div",{className:"text-center",style:{zIndex:10,maxWidth:"80%"},children:[e.jsx("div",{style:o("title"),children:"CERTIFICATE OF COMPLETION"}),e.jsx("div",{style:o("subtitle"),children:"This is to certify that"}),t.participant_name&&e.jsx("div",{style:o("participant_name"),children:t.participant_name}),t.course_name&&e.jsxs("div",{style:o("course_details"),children:["has successfully completed the course",e.jsx("br",{}),e.jsx("strong",{children:t.course_name})]}),t.company_name&&e.jsxs("div",{style:o("company_name"),children:["from ",t.company_name]}),(t.completion_date||t.issue_date)&&e.jsxs("div",{style:o("dates"),children:[t.completion_date&&e.jsxs("div",{children:["Completed on:"," ",t.formatted_completion_date||new Date(t.completion_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),t.issue_date&&e.jsxs("div",{children:["Issued on:"," ",t.formatted_issue_date||new Date(t.issue_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})]}),e.jsxs("div",{style:o("certificate_number"),children:["Certificate No: ",t.certificate_number]})]})}),e.jsx("div",{className:"mt-8 bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Certificate Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Certificate Number"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:t.certificate_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:t.status_display})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Participant"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:t.participant_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:t.participant_email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Course"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:t.course_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Company"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:t.company_name||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Completion Date"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:new Date(t.completion_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Issue Date"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:new Date(t.issue_date).toLocaleDateString()})]})]}),t.description&&e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100 mt-1",children:t.description})]})]})})]})}),e.jsx("style",{jsx:"true",children:`
        @media print {
          .certificate-container {
            width: 100vw !important;
            height: 100vh !important;
            margin: 0 !important;
            padding: 40px !important;
            box-shadow: none !important;
          }

          body * {
            visibility: hidden;
          }

          .certificate-container,
          .certificate-container * {
            visibility: visible;
          }

          .certificate-container {
            position: absolute;
            left: 0;
            top: 0;
          }
        }
      `})]})}export{W as default};
