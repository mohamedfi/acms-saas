import{r as j,j as e,H as B,L}from"./app-BLl8wz7X.js";import{A as R}from"./AuthenticatedLayout-BBmj54qy.js";import{C as S,a as F,L as A,B as T,p as _,b as D,c as G,A as H,P as I,d as O}from"./chart-DOR0rFuR.js";import{D as f,L as W,B as U}from"./index-Dv9vMPMO.js";import{h as $,E as M}from"./html2canvas.esm-XlD5_zrL.js";import"./ApplicationLogo-CLUV3Fv9.js";import"./transition-B5m-iN7L.js";S.register(F,A,T,_,D,G,H,I,O);function Q({stats:i,chartData:t,geographicData:b,performanceData:v,recentActivities:N,period:m,dateRange:g}){const[h,p]=j.useState(!1);j.useRef(null);const w={type:"doughnut",data:{labels:["Participants","Companies","Users"],datasets:[{data:[t.typeDistribution.participants,t.typeDistribution.companies,t.typeDistribution.users],backgroundColor:["#3B82F6","#10B981","#8B5CF6"],borderWidth:2,borderColor:"#ffffff"}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Client Type Distribution"}}}},k={type:"doughnut",data:{labels:["Active","Inactive"],datasets:[{data:[t.statusDistribution.active,t.statusDistribution.inactive],backgroundColor:["#10B981","#EF4444"],borderWidth:2,borderColor:"#ffffff"}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Client Status Distribution"}}}},C={type:"line",data:{labels:t.monthlyGrowth.map(s=>s.month),datasets:[{label:"Participants",data:t.monthlyGrowth.map(s=>s.participants),borderColor:"#3B82F6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4},{label:"Companies",data:t.monthlyGrowth.map(s=>s.companies),borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4},{label:"Users",data:t.monthlyGrowth.map(s=>s.users),borderColor:"#8B5CF6",backgroundColor:"rgba(139, 92, 246, 0.1)",tension:.4}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Monthly Client Growth"}},scales:{y:{beginAtZero:!0}}}},E={type:"bar",data:{labels:t.revenueByCompany.map(s=>s.name),datasets:[{label:"Revenue ($)",data:t.revenueByCompany.map(s=>s.revenue),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"#3B82F6",borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Top Companies by Revenue"}},scales:{y:{beginAtZero:!0}}}},P=async()=>{p(!0);try{const a=await(await fetch(route("clients.reports.export-pdf"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({period:m})})).json(),r=document.createElement("div");r.innerHTML=a.html,r.style.position="absolute",r.style.left="-9999px",r.style.top="0",r.style.width="210mm",document.body.appendChild(r);const o=await $(r,{scale:2,useCORS:!0,allowTaint:!0}),y=o.toDataURL("image/png"),l=new M("p","mm","a4"),c=210,u=295,d=o.height*c/o.width;let n=d,x=0;for(l.addImage(y,"PNG",0,x,c,d),n-=u;n>=0;)x=n-d,l.addPage(),l.addImage(y,"PNG",0,x,c,d),n-=u;document.body.removeChild(r),l.save(a.filename)}catch(s){console.error("Error exporting PDF:",s),alert("Error exporting PDF. Please try again.")}finally{p(!1)}};return e.jsxs(R,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"ðŸ“Š Client Reports & Analytics"}),children:[e.jsx(B,{title:"Client Reports"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"ðŸ“Š Client Reports & Analytics"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Comprehensive insights into your client base"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Report Period: ",g.start," to ",g.end," (",m," ","days)"]})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[e.jsx(L,{href:route("clients.index"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors cursor-pointer",children:"â† Back to Clients"}),e.jsx("button",{onClick:P,disabled:h,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-spin mr-2",children:"â³"}),"Exporting..."]}):"ðŸ“„ Export PDF"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ‘¥"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Clients"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:i.total_clients.toLocaleString()})]})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"âœ…"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Active Clients"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:i.active_clients.toLocaleString()})]})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ†•"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"New This Period"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:i.new_clients.toLocaleString()})]})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ’°"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:["$",i.total_revenue.toLocaleString()]})]})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-indigo-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ“ˆ"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Growth Rate"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:[i.growth_rate,"%"]})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsx(f,{...w})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsx(f,{...k})})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-8",children:e.jsx("div",{className:"p-6",children:e.jsx(W,{...C})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-8",children:e.jsx("div",{className:"p-6",children:e.jsx(U,{...E})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"ðŸŒ Geographic Distribution"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Country"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Participants"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Companies"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b.map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100",children:s.country}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:s.participants}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:s.companies}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100",children:s.total})]},a))})]})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"ðŸ† Top Performing Companies"}),e.jsx("div",{className:"space-y-4",children:v.topCompanies.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.vehicles," vehicles â€¢ Rating: ",s.rating,"/5"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-600 dark:text-green-400",children:["$",s.revenue.toLocaleString()]}),e.jsxs("div",{className:"flex space-x-1 mt-1",children:[s.is_featured&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"â­ Featured"}),s.is_verified&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"âœ… Verified"})]})]})]},a))})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"ðŸ“ˆ Recent Activities"}),e.jsx("div",{className:"space-y-3",children:N.map((s,a)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:s.icon})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:s.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(s.time).toLocaleString()})]})]},a))})]})})]})})]})}export{Q as default};
