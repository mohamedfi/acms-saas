import{u as A,r as y,j as e,H as E,L as b}from"./app-DPxrnJH9.js";import{A as D}from"./AuthenticatedLayout-dpSZcWTj.js";import"./ApplicationLogo-CRVY01fr.js";import"./transition-DYabZw25.js";function q({service:t,dietaryRequirements:h,employees:x,cateringRoles:f}){const{data:d,setData:s,put:j,processing:u,errors:l}=A({name:t.name,description:t.description||"",type:t.type,price_per_person:t.price_per_person,cuisine_type:t.cuisine_type||"",is_vegetarian:t.is_vegetarian,is_vegan:t.is_vegan,is_halal:t.is_halal,is_gluten_free:t.is_gluten_free,preparation_time_minutes:t.preparation_time_minutes,serving_temperature:t.serving_temperature||"",allergen_info:t.allergen_info||"",ingredients:t.ingredients||"",nutritional_info:t.nutritional_info||"",is_available:t.is_available,dietary_requirements:t.dietary_requirements?.map(r=>r.id)||[],employees:t.employees?.map(r=>({employee_id:r.id,role:r.pivot.role,notes:r.pivot.notes,is_primary:r.pivot.is_primary,is_available:r.pivot.is_available}))||[]}),[o,k]=y.useState(t.dietary_requirements?.map(r=>r.id)||[]),[n,g]=y.useState(t.employees?.map(r=>({employee_id:r.id,role:r.pivot.role,notes:r.pivot.notes,is_primary:r.pivot.is_primary,is_available:r.pivot.is_available}))||[]),v=r=>{r.preventDefault(),j(route("catering.services.update",t.id))},_=r=>{const i=o.includes(r)?o.filter(a=>a!==r):[...o,r];k(i),s("dietary_requirements",i)},N=r=>{if(x.find(a=>a.id===r)&&!n.find(a=>a.employee_id===r)){const a={employee_id:r,role:"chef",notes:"",is_primary:n.length===0,is_available:!0},c=[...n,a];g(c),s("employees",c)}},w=r=>{const i=n.filter(a=>a.employee_id!==r);g(i),s("employees",i)},m=(r,i,a)=>{const c=n.map(p=>p.employee_id===r?{...p,[i]:a}:p);g(c),s("employees",c)},C=r=>{const i=n.map(a=>({...a,is_primary:a.employee_id===r}));g(i),s("employees",i)},S=[{value:"breakfast",label:"Breakfast",icon:"🌅"},{value:"lunch",label:"Lunch",icon:"🍽️"},{value:"dinner",label:"Dinner",icon:"🌙"},{value:"snack",label:"Snack",icon:"🍎"},{value:"beverage",label:"Beverage",icon:"☕"}];return e.jsxs(D,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"✏️ Edit Catering Service"}),children:[e.jsx(E,{title:`Edit ${t.name}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-4xl sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:["Edit Service: ",t.name]}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Update the details and dietary information for this catering service."})]}),e.jsx(b,{href:route("catering.services"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"← Back to Services"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-xl",children:e.jsxs("form",{onSubmit:v,className:"p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700 pb-2",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Service Name *"}),e.jsx("input",{type:"text",value:d.name,onChange:r=>s("name",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Meal Type *"}),e.jsx("select",{value:d.type,onChange:r=>s("type",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,children:S.map(r=>e.jsxs("option",{value:r.value,children:[r.icon," ",r.label]},r.value))}),l.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Price per Person *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:d.price_per_person,onChange:r=>s("price_per_person",parseFloat(r.target.value)),className:"w-full pl-8 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0})]}),l.price_per_person&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.price_per_person})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cuisine Type"}),e.jsx("input",{type:"text",value:d.cuisine_type,onChange:r=>s("cuisine_type",r.target.value),placeholder:"e.g., Italian, Arabic, International",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),l.cuisine_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.cuisine_type})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:r=>s("description",r.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Describe the service, ingredients, and preparation..."}),l.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.description})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700 pb-2",children:"Dietary Options"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:d.is_vegetarian,onChange:r=>s("is_vegetarian",r.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"🥬 Vegetarian"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:d.is_vegan,onChange:r=>s("is_vegan",r.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"🌱 Vegan"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:d.is_halal,onChange:r=>s("is_halal",r.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"☪️ Halal"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:d.is_gluten_free,onChange:r=>s("is_gluten_free",r.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"🌾 Gluten-Free"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700 pb-2",children:"Preparation Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preparation Time (minutes) *"}),e.jsx("input",{type:"number",min:"1",value:d.preparation_time_minutes,onChange:r=>s("preparation_time_minutes",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0}),l.preparation_time_minutes&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.preparation_time_minutes})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Serving Temperature (°C)"}),e.jsx("input",{type:"number",value:d.serving_temperature||"",onChange:r=>s("serving_temperature",r.target.value?parseInt(r.target.value):null),placeholder:"e.g., 65, 70, 75",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),l.serving_temperature&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.serving_temperature})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700 pb-2",children:"Additional Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Allergen Information"}),e.jsx("input",{type:"text",value:d.allergen_info||"",onChange:r=>s("allergen_info",r.target.value),placeholder:"e.g., Contains gluten, dairy, eggs",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),l.allergen_info&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.allergen_info})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ingredients"}),e.jsx("textarea",{value:d.ingredients||"",onChange:r=>s("ingredients",r.target.value),rows:3,placeholder:"List main ingredients...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),l.ingredients&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.ingredients})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nutritional Information"}),e.jsx("textarea",{value:d.nutritional_info||"",onChange:r=>s("nutritional_info",r.target.value),rows:3,placeholder:"e.g., Calories: 400-500, Protein: 20g, Carbs: 45g, Fat: 18g",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),l.nutritional_info&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.nutritional_info})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700 pb-2",children:"Compatible Dietary Requirements"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(r=>e.jsxs("label",{className:`flex items-center space-x-3 p-3 border rounded-lg cursor-pointer transition-colors ${o.includes(r.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400"}`,children:[e.jsx("input",{type:"checkbox",checked:o.includes(r.id),onChange:()=>_(r.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:r.display_icon}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.category_label})]})]})]},r.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700 pb-2",children:"Assigned Employees"}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs("select",{onChange:r=>N(parseInt(r.target.value)),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select an employee to assign"}),x.filter(r=>!n.find(i=>i.employee_id===r.id)).map(r=>e.jsxs("option",{value:r.id,children:[r.display_name," -"," ",r.position_display]},r.id))]})}),n.length>0&&e.jsx("div",{className:"space-y-4",children:n.map(r=>{const i=x.find(a=>a.id===r.employee_id);return i?e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:(i.display_name||i.first_name||"E").charAt(0)})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:i.display_name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.position_display})]})]}),e.jsx("button",{type:"button",onClick:()=>w(r.employee_id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:"🗑️ Remove"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),e.jsx("select",{value:r.role,onChange:a=>m(r.employee_id,"role",a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm",children:f.map(a=>e.jsx("option",{value:a.name,children:a.display_name},a.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Primary Employee"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`primary_${r.employee_id}`,checked:r.is_primary,onChange:()=>C(r.employee_id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Primary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Available"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:r.is_available,onChange:a=>m(r.employee_id,"is_available",a.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Available"})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:r.notes||"",onChange:a=>m(r.employee_id,"notes",a.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-sm",placeholder:"Special instructions or notes..."})]})]},r.employee_id):null})}),n.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"text-4xl mb-2",children:"👥"}),e.jsx("p",{children:"No employees assigned to this service"}),e.jsx("p",{className:"text-sm",children:"Select an employee from the dropdown above to assign them"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700 pb-2",children:"Service Status"}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:d.is_available,onChange:r=>s("is_available",r.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Service is available for ordering"})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx(b,{href:route("catering.services"),className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Updating...":"Update Service"})]})]})})]})})]})}export{q as default};
