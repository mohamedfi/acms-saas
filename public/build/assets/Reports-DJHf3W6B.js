import{r as w,j as e,H as E}from"./app-BLl8wz7X.js";import{A as L}from"./AuthenticatedLayout-BBmj54qy.js";import{C as _,a as A,L as F,B as S,p as B,b as V,c as H,A as W,P as $,d as z}from"./chart-DOR0rFuR.js";import{L as M,D as G,B as T}from"./index-Dv9vMPMO.js";import{h as I,E as R}from"./html2canvas.esm-XlD5_zrL.js";import"./ApplicationLogo-CLUV3Fv9.js";import"./transition-B5m-iN7L.js";_.register(A,F,S,B,V,H,W,$,z);function Y({stats:s,vehicles:t,companies:m,monthlyRevenue:d,vehicleTypes:l,topRoutes:i}){var f,N;const[j,b]=w.useState(!1),y=w.useRef(null),k=async()=>{b(!0);try{const a=y.current,n=await I(a,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!1}),x=n.toDataURL("image/png"),r=new R("p","mm","a4"),h=210,u=295,c=n.height*h/n.width;let o=c,p=0;for(r.addImage(x,"PNG",0,p,h,c),o-=u;o>=0;)p=o-c,r.addPage(),r.addImage(x,"PNG",0,p,h,c),o-=u;const P=new Date().toLocaleDateString();r.save(`Transportation-Reports-${P}.pdf`)}catch(a){console.error("Error generating PDF:",a),alert("Error generating PDF. Please try again.")}finally{b(!1)}},v={labels:(d==null?void 0:d.map(a=>a.month))||[],datasets:[{label:"Monthly Revenue ($)",data:(d==null?void 0:d.map(a=>a.revenue))||[],backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2}]},C={labels:(l==null?void 0:l.map(a=>a.type))||[],datasets:[{data:(l==null?void 0:l.map(a=>a.count))||[],backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(168, 85, 247, 0.8)","rgba(245, 158, 11, 0.8)"],borderColor:["rgba(239, 68, 68, 1)","rgba(34, 197, 94, 1)","rgba(59, 130, 246, 1)","rgba(168, 85, 247, 1)","rgba(245, 158, 11, 1)"],borderWidth:2}]},D={labels:(i==null?void 0:i.map(a=>a.route))||[],datasets:[{label:"Bookings",data:(i==null?void 0:i.map(a=>a.bookings))||[],backgroundColor:"rgba(34, 197, 94, 0.5)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2}]},g={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Transportation Analytics"}}};return e.jsxs(L,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"📊 Transportation Reports & Analytics"}),e.jsx("button",{onClick:k,disabled:j,className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Generating PDF..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"Export PDF"})]})})]}),children:[e.jsx(E,{title:"Transportation Reports"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",ref:y,children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-8",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Transportation Reports & Analytics"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-4",children:"Comprehensive Fleet Management Report"}),e.jsxs("div",{className:"flex justify-center space-x-8 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Generated:"})," ",new Date().toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Total Companies:"})," ",(m==null?void 0:m.length)||0]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Total Vehicles:"})," ",(t==null?void 0:t.length)||0]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"$"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:["$",((f=s==null?void 0:s.total_revenue)==null?void 0:f.toLocaleString())||0]})]})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"🚗"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Active Vehicles"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:(s==null?void 0:s.active_vehicles)||0})]})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"📊"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Utilization Rate"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:[(s==null?void 0:s.utilization_rate)||0,"%"]})]})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"⭐"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Average Rating"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:((N=s==null?void 0:s.average_rating)==null?void 0:N.toFixed(1))||0})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"📈 Monthly Revenue Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(M,{data:v,options:g})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"🚗 Fleet Composition"}),e.jsx("div",{className:"h-64",children:e.jsx(G,{data:C,options:g})})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-8",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"🛣️ Popular Routes Performance"}),e.jsx("div",{className:"h-64",children:e.jsx(T,{data:D,options:g})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"🏆 Top Performing Vehicles"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Vehicle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Company"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Rating"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t==null?void 0:t.slice(0,10).map(a=>{var n,x,r;return e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[a.brand," ",a.model]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.vehicle_type," • ",a.year]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:((n=a.rental_company)==null?void 0:n.name)||"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["$",((x=a.revenue_to_date)==null?void 0:x.toLocaleString())||0]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${a.status==="available"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":a.status==="rented"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:a.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:["⭐ ",((r=a.average_rating)==null?void 0:r.toFixed(1))||"N/A"]})]},a.id)})})]})})]})})]})})]})}export{Y as default};
