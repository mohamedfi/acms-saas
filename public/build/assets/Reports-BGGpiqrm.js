import{r as p,j as e,H as S,L as j}from"./app-BLl8wz7X.js";import{A as D}from"./AuthenticatedLayout-BBmj54qy.js";import{C as d,a as c,b as y,c as u,B as O}from"./badge-BhJc3Ve6.js";import{B as _}from"./button-Dw2L4I8A.js";import"./ApplicationLogo-CLUV3Fv9.js";import"./transition-B5m-iN7L.js";function P({auth:C,stats:x,halls:o,bookings:h,programs:E}){const[f,T]=p.useState("month"),[g,B]=p.useState("all"),[r,H]=p.useState(null);p.useEffect(()=>{A()},[f,g,h,o]);const A=()=>{let t=h;g!=="all"&&(t=h.filter(n=>n.training_hall_id==g));const s={},i={},a={},l={};t.forEach(n=>{var k,b;const m=new Date(n.start_date).toLocaleString("default",{month:"short",year:"2-digit"});s[m]=(s[m]||0)+1;const v=((k=n.training_program)==null?void 0:k.name)||"Unknown";i[v]=(i[v]||0)+1;const w=((b=o.find($=>$.id==n.training_hall_id))==null?void 0:b.name)||"Unknown";a[w]=(a[w]||0)+1,l[n.status]=(l[n.status]||0)+1}),H({monthly:s,programs:i,halls:a,status:l})},R=()=>{let t="data:text/csv;charset=utf-8,";t+=`Training Hall Report
`,t+="Generated: "+new Date().toLocaleDateString()+`

`,t+=`Hall Name,Code,City,Capacity,Total Bookings,Active Bookings,Utilization Rate
`,o.forEach(a=>{const l=h.filter(m=>m.training_hall_id==a.id),n=l.filter(m=>m.status!=="cancelled"),N=a.capacity>0?(n.length/a.capacity*100).toFixed(1):0;t+=`"${a.name}","${a.code}","${a.city}",${a.capacity},${l.length},${n.length},${N}%
`});const s=encodeURI(t),i=document.createElement("a");i.setAttribute("href",s),i.setAttribute("download",`training-hall-report-${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(i),i.click(),document.body.removeChild(i)};return e.jsxs(D,{user:C.user,children:[e.jsx(S,{title:"Training Hall Reports & Analytics"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Training Hall Reports & Analytics"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Comprehensive insights and performance metrics"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(_,{onClick:R,variant:"default",className:"bg-green-600 hover:bg-green-700 border-green-600",children:"📥 Export CSV"}),e.jsx(j,{href:route("training-halls.index"),children:e.jsx(_,{children:"← Back to Halls"})})]})]}),e.jsx(d,{className:"mb-6",children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Timeframe"}),e.jsxs("select",{value:f,onChange:t=>T(t.target.value),className:"border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"year",children:"This Year"}),e.jsx("option",{value:"all",children:"All Time"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Training Hall"}),e.jsxs("select",{value:g,onChange:t=>B(t.target.value),className:"border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"all",children:"All Halls"}),o.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(d,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:"🏢"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Halls"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.total_halls})]})]})})}),e.jsx(d,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:"📅"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.total_bookings})]})]})})}),e.jsx(d,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:"👥"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Halls"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.active_halls})]})]})})}),e.jsx(d,{children:e.jsx(c,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:"📈"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Utilization Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[x.total_halls>0?Math.round(x.halls_with_bookings/x.total_halls*100):0,"%"]})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(d,{children:[e.jsx(y,{children:e.jsx(u,{className:"flex items-center",children:"📊 Monthly Bookings Trend"})}),e.jsx(c,{children:r!=null&&r.monthly&&Object.keys(r.monthly).length>0?e.jsx("div",{className:"space-y-3",children:Object.entries(r.monthly).map(([t,s])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 w-20",children:t}),e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${s/Math.max(...Object.values(r.monthly))*100}%`}})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white w-12 text-right",children:s})]})]},t))}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No data available for the selected timeframe"})})]}),e.jsxs(d,{children:[e.jsx(y,{children:e.jsx(u,{className:"flex items-center",children:"🥧 Program Distribution"})}),e.jsx(c,{children:r!=null&&r.programs&&Object.keys(r.programs).length>0?e.jsx("div",{className:"space-y-3",children:Object.entries(r.programs).map(([t,s])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 truncate max-w-32",children:t}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-green-600 h-3 rounded-full transition-all duration-300",style:{width:`${s/Math.max(...Object.values(r.programs))*100}%`}})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white w-12 text-right",children:s})]})]},t))}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No data available for the selected timeframe"})})]})]}),e.jsxs(d,{children:[e.jsx(y,{children:e.jsx(u,{className:"flex items-center",children:"📈 Hall Performance Overview"})}),e.jsx(c,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hall"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capacity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Bookings"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Active Bookings"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilization Rate"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:o.map(t=>{const s=h.filter(l=>l.training_hall_id==t.id),i=s.filter(l=>l.status!=="cancelled"),a=t.capacity>0?(i.length/t.capacity*100).toFixed(1):0;return e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.code})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.city}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.capacity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:s.length}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:i.length}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:`h-2 rounded-full ${a>70?"bg-green-600":a>40?"bg-yellow-600":"bg-red-600"}`,style:{width:`${Math.min(a,100)}%`}})}),e.jsxs("span",{className:"text-sm text-gray-900 dark:text-white",children:[a,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(O,{className:t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(j,{href:route("training-halls.show",t.id),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"View"}),e.jsx(j,{href:route("training-halls.pdf",t.id),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:"PDF"})]})})]},t.id)})})]})})})]})]})})]})}export{P as default};
