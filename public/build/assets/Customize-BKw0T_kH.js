import{r as p,u as Ie,j as e}from"./app-BLl8wz7X.js";import{A as Te}from"./AuthenticatedLayout-BBmj54qy.js";import{P as Re}from"./PrimaryButton-DPkOIpUq.js";import{I as d}from"./InputLabel-Da3M09d0.js";import"./TextInput-D0aqGOS1.js";import"./ApplicationLogo-CLUV3Fv9.js";import"./transition-B5m-iN7L.js";function Me({certificate:s,backgroundImages:b=[]}){var _,v,j,k,w,N,z,C,S,I,T,R,P,A,D,E,L,F,O,$,U,B,M,W,G,H;const[Pe,Ae]=p.useState({}),[a,fe]=p.useState("title"),[u,h]=p.useState(null),{data:n,setData:c,post:ye,processing:_e,errors:De}=Ie({customization:s.customization||{},background_image:null,selected_background_image:s.background_image||""}),i={title:{font_family:"Times New Roman",font_size:"3em",color:"#8b4513",position:{top:"20%",left:"50%"},text_align:"center"},subtitle:{font_family:"Times New Roman",font_size:"1.5em",color:"#34495e",position:{top:"35%",left:"50%"},text_align:"center"},participant_name:{font_family:"Times New Roman",font_size:"2.5em",color:"#2c3e50",position:{top:"45%",left:"50%"},text_align:"center",underline:!0,underline_color:"#e74c3c"},course_details:{font_family:"Times New Roman",font_size:"1.3em",color:"#34495e",position:{top:"60%",left:"50%"},text_align:"center"},company_name:{font_family:"Times New Roman",font_size:"1.2em",color:"#7f8c8d",position:{top:"70%",left:"50%"},text_align:"center",italic:!0},dates:{font_family:"Times New Roman",font_size:"1.1em",color:"#34495e",position:{top:"80%",left:"50%"},text_align:"center"},certificate_number:{font_family:"Times New Roman",font_size:"0.9em",color:"#7f8c8d",position:{bottom:"20px",right:"20px"},text_align:"right"}},f=(t,o)=>{const l={...t};for(const r in o)o[r]&&typeof o[r]=="object"&&!Array.isArray(o[r])?l[r]=f(t[r]||{},o[r]):l[r]=o[r];return l},ve=f(i,n.customization||{}),je=["Times New Roman","Arial","Helvetica","Georgia","Verdana","Courier New","Brush Script MT","Comic Sans MS","Impact","Trebuchet MS"],ke=[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}],x={title:"Certificate Title",subtitle:"Subtitle",participant_name:"Participant Name",course_details:"Course Details",company_name:"Company Name",dates:"Dates",certificate_number:"Certificate Number"},g=(t,o,l)=>{const r={...n.customization};r[t]||(r[t]={}),r[t][o]=l,c("customization",r)},y=(t,o,l)=>{const r={...n.customization};r[t]||(r[t]={}),r[t].position||(r[t].position={}),r[t].position[o]=l,c("customization",r)},we=t=>{const o={...n.customization};delete o[t],c("customization",o)},Ne=()=>{c("customization",{})},ze=t=>{t.preventDefault(),ye(route("certificates.save-customization",s.id))},Ce=t=>{const o=t.target.files[0];o&&(c("background_image",o),c("selected_background_image",""),h(URL.createObjectURL(o)))},Se=t=>{const o=t.target.value;c("selected_background_image",o),c("background_image",null),h(null)},m=t=>{var l,r,V,q,J,K,Q,X,Y,Z,ee,te,oe,ae,se,ie,re,ne,le,de,ce,me,ge,ue,xe,pe,be,he;const o=ve[t];return o?{fontFamily:o.font_family||((oe=i[t])==null?void 0:oe.font_family),fontSize:o.font_size||((ae=i[t])==null?void 0:ae.font_size),color:o.color||((se=i[t])==null?void 0:se.color),textAlign:o.text_align||((ie=i[t])==null?void 0:ie.text_align),position:"absolute",transform:"translate(-50%, -50%)",top:((re=o.position)==null?void 0:re.top)||((le=(ne=i[t])==null?void 0:ne.position)==null?void 0:le.top),left:((de=o.position)==null?void 0:de.left)||((me=(ce=i[t])==null?void 0:ce.position)==null?void 0:me.left),bottom:((ge=o.position)==null?void 0:ge.bottom)||((xe=(ue=i[t])==null?void 0:ue.position)==null?void 0:xe.bottom),right:((pe=o.position)==null?void 0:pe.right)||((he=(be=i[t])==null?void 0:be.position)==null?void 0:he.right),fontWeight:"bold",zIndex:10,...o.underline&&{textDecoration:"underline",textDecorationColor:o.underline_color||"#e74c3c",textDecorationThickness:"3px"},...o.italic&&{fontStyle:"italic"}}:{fontFamily:(l=i[t])==null?void 0:l.font_family,fontSize:(r=i[t])==null?void 0:r.font_size,color:(V=i[t])==null?void 0:V.color,textAlign:(q=i[t])==null?void 0:q.text_align,position:"absolute",transform:"translate(-50%, -50%)",top:(K=(J=i[t])==null?void 0:J.position)==null?void 0:K.top,left:(X=(Q=i[t])==null?void 0:Q.position)==null?void 0:X.left,bottom:(Z=(Y=i[t])==null?void 0:Y.position)==null?void 0:Z.bottom,right:(te=(ee=i[t])==null?void 0:ee.position)==null?void 0:te.right,fontWeight:"bold",zIndex:10}};return e.jsx(Te,{children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Customize Certificate"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Reset All"}),e.jsx(Re,{onClick:ze,disabled:_e,children:"Save Customization"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Live Preview"}),e.jsx("div",{className:"flex justify-center bg-gray-100 dark:bg-gray-800 p-6 rounded-lg",children:e.jsxs("div",{className:"certificate-preview bg-white shadow-2xl",style:{width:"842px",height:"595px",backgroundImage:u?`url(${u})`:s.background_image?`url(${s.background_image.startsWith("http")?s.background_image:`${window.location.origin}/storage/${s.background_image}`})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontFamily:'"Times New Roman", serif',color:"#2c3e50",padding:"40px",boxSizing:"border-box"},children:[e.jsx("div",{style:m("title"),children:"CERTIFICATE OF COMPLETION"}),e.jsx("div",{style:m("subtitle"),children:"This is to certify that"}),s.participant_name&&e.jsx("div",{style:m("participant_name"),children:s.participant_name}),s.course_name&&e.jsxs("div",{style:m("course_details"),children:["has successfully completed the course",e.jsx("br",{}),e.jsx("strong",{children:s.course_name})]}),s.company_name&&e.jsxs("div",{style:m("company_name"),children:["from ",s.company_name]}),(s.completion_date||s.issue_date)&&e.jsxs("div",{style:m("dates"),children:[s.completion_date&&e.jsxs("div",{children:["Completed on:"," ",s.formatted_completion_date||(s.completion_date?new Date(s.completion_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"")]}),s.issue_date&&e.jsxs("div",{children:["Issued on:"," ",s.formatted_issue_date||(s.issue_date?new Date(s.issue_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"")]})]}),e.jsxs("div",{style:m("certificate_number"),children:["Certificate No: ",s.certificate_number]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Background Image"}),s.background_image&&e.jsxs("div",{className:"mb-4",children:[e.jsx(d,{value:"Current Background Image"}),e.jsx("div",{className:"relative w-full max-w-md",children:e.jsx("img",{src:s.background_image.startsWith("http")?s.background_image:`${window.location.origin}/storage/${s.background_image}`,alt:"Current Background",className:"w-full h-auto rounded-lg shadow-md border border-gray-200 dark:border-gray-600",onError:t=>{t.target.src=`${window.location.origin}/images/default-certificate-bg.jpg`}})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(d,{value:"Upload New Background Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Ce,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),u&&e.jsxs("div",{className:"mt-2",children:[e.jsx(d,{value:"Preview"}),e.jsx("img",{src:u,alt:"Preview",className:"w-full max-w-md h-auto rounded-lg shadow-md border border-gray-200 dark:border-gray-600"})]})]}),b.length>0&&e.jsxs("div",{children:[e.jsx(d,{value:"Or Select Existing Image"}),e.jsxs("select",{value:n.selected_background_image||"",onChange:Se,className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",children:[e.jsx("option",{value:"",children:"Choose an existing image..."}),b.map(t=>e.jsxs("option",{value:t.type==="uploaded"?`certificate-backgrounds/${t.filename}`:t.filename,children:[t.name," (",t.type,")"]},t.filename))]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Element to Customize"}),e.jsx("select",{value:a,onChange:t=>fe(t.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 dark:bg-gray-600 dark:text-white rounded-md",children:Object.entries(x).map(([t,o])=>e.jsx("option",{value:t,children:o},t))})]}),a&&e.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50 dark:bg-gray-700",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Customize ",x[a]]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(d,{value:"Font Family"}),e.jsx("select",{value:((v=(_=n.customization)==null?void 0:_[a])==null?void 0:v.font_family)||((j=i[a])==null?void 0:j.font_family)||"",onChange:t=>g(a,"font_family",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-600 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:je.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(d,{value:"Font Size"}),e.jsx("input",{type:"text",value:((w=(k=n.customization)==null?void 0:k[a])==null?void 0:w.font_size)||((N=i[a])==null?void 0:N.font_size)||"",onChange:t=>g(a,"font_size",t.target.value),placeholder:"e.g., 2em, 24px, 1.5rem",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-600 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(d,{value:"Color"}),e.jsx("input",{type:"color",value:((C=(z=n.customization)==null?void 0:z[a])==null?void 0:C.color)||((S=i[a])==null?void 0:S.color)||"#000000",onChange:t=>g(a,"color",t.target.value),className:"mt-1 block w-full h-10 rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(d,{value:"Text Alignment"}),e.jsx("select",{value:((T=(I=n.customization)==null?void 0:I[a])==null?void 0:T.text_align)||((R=i[a])==null?void 0:R.text_align)||"center",onChange:t=>g(a,"text_align",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-600 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:ke.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(d,{value:"Position"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400",children:"Top"}),e.jsx("input",{type:"text",value:((D=(A=(P=n.customization)==null?void 0:P[a])==null?void 0:A.position)==null?void 0:D.top)||((L=(E=i[a])==null?void 0:E.position)==null?void 0:L.top)||"",onChange:t=>y(a,"top",t.target.value),placeholder:"e.g., 20%, 100px",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-600 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400",children:"Left"}),e.jsx("input",{type:"text",value:(($=(O=(F=n.customization)==null?void 0:F[a])==null?void 0:O.position)==null?void 0:$.left)||((B=(U=i[a])==null?void 0:U.position)==null?void 0:B.left)||"",onChange:t=>y(a,"left",t.target.value),placeholder:"e.g., 50%, 200px",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-600 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]})]})]}),(a==="participant_name"||a==="company_name")&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[a==="participant_name"&&e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:((W=(M=n.customization)==null?void 0:M[a])==null?void 0:W.underline)||!1,onChange:t=>g(a,"underline",t.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Underline"})]}),a==="company_name"&&e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:((H=(G=n.customization)==null?void 0:G[a])==null?void 0:H.italic)||!1,onChange:t=>g(a,"italic",t.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:"Italic"})]})]})}),e.jsxs("button",{onClick:()=>we(a),className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:["Reset ",x[a]]})]})]})]})]})})})})})}export{Me as default};
