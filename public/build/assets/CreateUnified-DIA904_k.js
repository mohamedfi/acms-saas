import{r as u,u as F,j as e,H as S,L as j}from"./app-CimGcIIJ.js";import{A as T}from"./AuthenticatedLayout-DuDliEYG.js";import{I as n}from"./InputError-CtMvPVJJ.js";import{I as r}from"./InputLabel-DSgafcEA.js";import{T as o}from"./TextInput-0Km43sEB.js";import{P as A}from"./PrimaryButton-BiK4mn6r.js";import"./ApplicationLogo-CIKOWYl-.js";import"./transition-DIRcOHmM.js";function z(){const[m,v]=u.useState([]),[x,y]=u.useState([]),[g,b]=u.useState(!1),{data:t,setData:s,post:f,processing:_,errors:i}=F({name:"",code:"",description:"",address:"",city:"",capacity:30,facilities:[],contact_person:"",contact_phone:"",contact_email:"",assigned_employee_id:"",assigned_role:"",assignment_date:"",assignment_notes:"",specialized_courses:[],is_general_purpose:!0,is_active:!0,sort_order:0,training_program_id:"",trainer_id:"",start_date:"",end_date:"",start_time:"",end_time:"",max_participants:30,current_participants:0,price_per_participant:"",notes:"",is_recurring:!1,recurring_pattern:{days_of_week:[],frequency:"weekly"}});u.useEffect(()=>{(async()=>{try{const d=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),l=window.location.origin+"/pmec2/public",c=await fetch(`${l}/api/training-programs`,{headers:{"X-CSRF-TOKEN":d,Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin"});if(c.ok){const h=await c.json();v(h.data||[])}const p=await fetch(`${l}/api/trainers`,{headers:{"X-CSRF-TOKEN":d,Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin"});if(p.ok){const h=await p.json();y(h.data||[])}}catch(d){console.error("Error fetching data:",d)}})()},[]);const k=a=>{a.preventDefault(),f(route("training-halls.store-unified"))},N=()=>{const a=prompt("Enter facility name:");a&&a.trim()&&s("facilities",[...t.facilities,a.trim()])},w=a=>{s("facilities",t.facilities.filter((d,l)=>l!==a))},C=()=>{const a={hall:{name:t.name||"Sample Hall",code:t.code||"SAMPLE",city:t.city||"Sample City",capacity:t.capacity||30,facilities:t.facilities,contact_person:t.contact_person||"Not specified",contact_phone:t.contact_phone||"Not specified",contact_email:t.contact_email||"Not specified",is_active:t.is_active},booking:g?{training_program:m.find(l=>l.id==t.training_program_id),trainer:x.find(l=>l.id==t.trainer_id),start_date:t.start_date,end_date:t.end_date,start_time:t.start_time,end_time:t.end_time,max_participants:t.max_participants,current_participants:t.current_participants,price_per_participant:t.price_per_participant}:null},d=`📄 PDF Report Preview:

🏢 Hall Information:
- Name: ${a.hall.name}
- Code: ${a.hall.code}
- City: ${a.hall.city}
- Capacity: ${a.hall.capacity} participants
- Status: ${a.hall.is_active?"Active":"Inactive"}

${g?`📅 Booking Information:
- Course: ${a.booking.training_program?.name||"Not selected"}
- Trainer: ${a.booking.trainer?.full_name||"Not assigned"}
- Dates: ${a.booking.start_date} to ${a.booking.end_date}
- Time: ${a.booking.start_time} - ${a.booking.end_time}
- Participants: ${a.booking.current_participants}/${a.booking.max_participants}`:"No booking information provided"}

✨ This is a preview. After saving, you can generate the actual PDF from the Training Halls list.`;alert(d)};return e.jsxs(T,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"🚀 Create Training Hall & Booking (Unified)"}),e.jsx(j,{href:route("training-halls.index"),className:"inline-flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm font-medium rounded-lg transition-colors duration-200",children:"⬅️ Back to Training Halls"})]}),children:[e.jsx(S,{title:"Create Training Hall & Booking"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-6xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"🎯 Complete Training Hall & Booking Setup"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create a new training hall and optionally schedule your first training session - all in one place!"})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200",children:"🏢 Training Hall Information"}),e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Required"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"name",value:"Hall Name *"}),e.jsx(o,{id:"name",type:"text",name:"name",value:t.name,className:"mt-1 block w-full",onChange:a=>s("name",a.target.value),placeholder:"e.g., مكانك اسكندرية",required:!0}),e.jsx(n,{message:i.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"code",value:"Hall Code *"}),e.jsx(o,{id:"code",type:"text",name:"code",value:t.code,className:"mt-1 block w-full",onChange:a=>s("code",a.target.value.toUpperCase()),placeholder:"e.g., ALEX",maxLength:"10",required:!0}),e.jsx(n,{message:i.code,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(r,{htmlFor:"description",value:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:t.description,onChange:a=>s("description",a.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Brief description of the training hall and its purpose"}),e.jsx(n,{message:i.description,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"city",value:"City *"}),e.jsx(o,{id:"city",type:"text",name:"city",value:t.city,className:"mt-1 block w-full",onChange:a=>s("city",a.target.value),placeholder:"e.g., الإسكندرية",required:!0}),e.jsx(n,{message:i.city,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"address",value:"Address"}),e.jsx(o,{id:"address",type:"text",name:"address",value:t.address,className:"mt-1 block w-full",onChange:a=>s("address",a.target.value),placeholder:"e.g., Alexandria, Egypt"}),e.jsx(n,{message:i.address,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"capacity",value:"Maximum Capacity *"}),e.jsx(o,{id:"capacity",type:"number",name:"capacity",value:t.capacity,className:"mt-1 block w-full",onChange:a=>s("capacity",a.target.value),min:"1",max:"1000",required:!0}),e.jsx(n,{message:i.capacity,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"sort_order",value:"Sort Order"}),e.jsx(o,{id:"sort_order",type:"number",name:"sort_order",value:t.sort_order,className:"mt-1 block w-full",onChange:a=>s("sort_order",a.target.value),min:"0",placeholder:"0"}),e.jsx(n,{message:i.sort_order,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(r,{value:"Available Facilities"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[t.facilities.map((a,d)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:a}),e.jsx("button",{type:"button",onClick:()=>w(d),className:"text-red-600 hover:text-red-800 text-sm",children:"✕"})]},d)),e.jsx("button",{type:"button",onClick:N,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"➕ Add Facility"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"contact_person",value:"Contact Person"}),e.jsx(o,{id:"contact_person",type:"text",name:"contact_person",value:t.contact_person,className:"mt-1 block w-full",onChange:a=>s("contact_person",a.target.value),placeholder:"e.g., Ahmed Hassan"}),e.jsx(n,{message:i.contact_person,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"contact_phone",value:"Contact Phone"}),e.jsx(o,{id:"contact_phone",type:"text",name:"contact_phone",value:t.contact_phone,className:"mt-1 block w-full",onChange:a=>s("contact_phone",a.target.value),placeholder:"e.g., +20-3-1234-5678"}),e.jsx(n,{message:i.contact_phone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"contact_email",value:"Contact Email"}),e.jsx(o,{id:"contact_email",type:"email",name:"contact_email",value:t.contact_email,className:"mt-1 block w-full",onChange:a=>s("contact_email",a.target.value),placeholder:"e.g., hall@company.com"}),e.jsx(n,{message:i.contact_email,className:"mt-2"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:t.is_active,onChange:a=>s("is_active",a.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Training hall is active"})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-purple-800 dark:text-purple-200 mb-4",children:"👤 Employee Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"assigned_employee_id",value:"Assigned Employee"}),e.jsxs("select",{id:"assigned_employee_id",name:"assigned_employee_id",value:t.assigned_employee_id,onChange:a=>s("assigned_employee_id",a.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select an employee"}),x.map(a=>e.jsxs("option",{value:a.id,children:[a.full_name," ","- ",a.position]},a.id))]}),e.jsx(n,{message:i.assigned_employee_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"assigned_role",value:"Assignment Role"}),e.jsxs("select",{id:"assigned_role",name:"assigned_role",value:t.assigned_role,onChange:a=>s("assigned_role",a.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select a role"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"coordinator",children:"Coordinator"}),e.jsx("option",{value:"supervisor",children:"Supervisor"}),e.jsx("option",{value:"assistant",children:"Assistant"})]}),e.jsx(n,{message:i.assigned_role,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"assignment_date",value:"Assignment Date"}),e.jsx("input",{id:"assignment_date",type:"date",name:"assignment_date",value:t.assignment_date,onChange:a=>s("assignment_date",a.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx(n,{message:i.assignment_date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"assignment_notes",value:"Assignment Notes"}),e.jsx("textarea",{id:"assignment_notes",name:"assignment_notes",value:t.assignment_notes,onChange:a=>s("assignment_notes",a.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"2",placeholder:"Notes about this employee assignment..."}),e.jsx(n,{message:i.assignment_notes,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsx("h4",{className:"text-lg font-semibold text-green-800 dark:text-green-200 mb-4",children:"📚 Course Specialization"}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_general_purpose",checked:t.is_general_purpose,onChange:a=>s("is_general_purpose",a.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"This hall can host any type of course (General Purpose)"})]})}),!t.is_general_purpose&&e.jsxs("div",{children:[e.jsx(r,{value:"Specialized Courses"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[t.specialized_courses.map((a,d)=>{const l=m.find(c=>c.id==a);return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:l?.name||`Course ID: ${a}`}),e.jsx("button",{type:"button",onClick:()=>s("specialized_courses",t.specialized_courses.filter((c,p)=>p!==d)),className:"text-red-600 hover:text-red-800 text-sm",children:"✕"})]},d)}),e.jsxs("select",{onChange:a=>{a.target.value&&!t.specialized_courses.includes(a.target.value)&&(s("specialized_courses",[...t.specialized_courses,a.target.value]),a.target.value="")},className:"mt-2 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Add a specialized course"}),m.map(a=>e.jsxs("option",{value:a.id,children:[a.name," ","(",a.code,")"]},a.id))]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200",children:"📅 Training Session Booking (Optional)"}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:a=>b(a.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Schedule training session now"})]})]}),g&&e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"training_program_id",value:"Course Name *"}),e.jsxs("select",{id:"training_program_id",name:"training_program_id",value:t.training_program_id,onChange:a=>s("training_program_id",a.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"Select a course"}),m.map(a=>e.jsxs("option",{value:a.id,children:[a.name," ","(",a.code,") -"," ",a.duration_hours,"h"]},a.id))]}),e.jsx(n,{message:i.training_program_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"trainer_id",value:"Trainer"}),e.jsxs("select",{id:"trainer_id",name:"trainer_id",value:t.trainer_id,onChange:a=>s("trainer_id",a.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Select a trainer"}),x.map(a=>e.jsxs("option",{value:a.id,children:[a.full_name," ","-"," ",a.position]},a.id))]}),e.jsx(n,{message:i.trainer_id,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"start_date",value:"Start Date *"}),e.jsx("input",{id:"start_date",type:"date",name:"start_date",value:t.start_date,className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:a=>s("start_date",a.target.value),min:new Date().toISOString().split("T")[0],required:!0}),e.jsx(n,{message:i.start_date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"end_date",value:"End Date *"}),e.jsx("input",{id:"end_date",type:"date",name:"end_date",value:t.end_date,className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:a=>s("end_date",a.target.value),min:t.start_date||new Date().toISOString().split("T")[0],required:!0}),e.jsx(n,{message:i.end_date,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"start_time",value:"Start Time *"}),e.jsx("input",{id:"start_time",type:"time",name:"start_time",value:t.start_time,className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:a=>s("start_time",a.target.value),required:!0}),e.jsx(n,{message:i.start_time,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"end_time",value:"End Time *"}),e.jsx("input",{id:"end_time",type:"time",name:"end_time",value:t.end_time,className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:a=>s("end_time",a.target.value),required:!0}),e.jsx(n,{message:i.end_time,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(r,{htmlFor:"max_participants",value:"Max Participants *"}),e.jsx(o,{id:"max_participants",type:"number",name:"max_participants",value:t.max_participants,className:"mt-1 block w-full",onChange:a=>s("max_participants",a.target.value),min:"1",max:t.capacity,required:!0}),e.jsx(n,{message:i.max_participants,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"current_participants",value:"Current Participants"}),e.jsx(o,{id:"current_participants",type:"number",name:"current_participants",value:t.current_participants,className:"mt-1 block w-full",onChange:a=>s("current_participants",a.target.value),min:"0",max:t.max_participants}),e.jsx(n,{message:i.current_participants,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"price_per_participant",value:"Price per Participant"}),e.jsx(o,{id:"price_per_participant",type:"number",name:"price_per_participant",value:t.price_per_participant,className:"mt-1 block w-full",onChange:a=>s("price_per_participant",a.target.value),min:"0",step:"0.01",placeholder:"0.00"}),e.jsx(n,{message:i.price_per_participant,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(r,{htmlFor:"notes",value:"Session Notes"}),e.jsx("textarea",{id:"notes",name:"notes",value:t.notes,onChange:a=>s("notes",a.target.value),className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Additional notes about this training session..."}),e.jsx(n,{message:i.notes,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex space-x-4",children:e.jsx("button",{type:"button",onClick:C,className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition-colors duration-200",children:"📄 Generate PDF Report"})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(j,{href:route("training-halls.index"),className:"inline-flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm font-medium rounded-lg transition-colors duration-200",children:"Cancel"}),e.jsx(A,{type:"submit",disabled:_,className:"inline-flex items-center px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white text-lg font-medium rounded-lg transition-colors duration-200",children:_?"Creating...":"🚀 Create Hall & Booking"})]})]})]})]})})})})]})}export{z as default};
