import{r as d,u as N,j as e,H as v,L as l}from"./app-BvofbhrV.js";import{A as w}from"./AuthenticatedLayout-Bhu4KWM0.js";import"./ApplicationLogo-COzY0AUK.js";import"./transition-CjfadS_U.js";function B({participant:r}){const[m,u]=d.useState(r.profile_image_url),[c,x]=d.useState([]),[_,h]=d.useState([]),b=["Afghan","Albanian","Algerian","American","Andorran","Angolan","Antiguans","Argentinean","Armenian","Australian","Austrian","Azerbaijani","Bahamian","Bahraini","Bangladeshi","Barbadian","Barbudans","Batswana","Belarusian","Belgian","Belizean","Beninese","Bhutanese","Bolivian","Bosnian","Brazilian","British","Bruneian","Bulgarian","Burkinabe","Burmese","Burundian","Cambodian","Cameroonian","Canadian","Cape Verdean","Central African","Chadian","Chilean","Chinese","Colombian","Comoran","Congolese","Costa Rican","Croatian","Cuban","Cypriot","Czech","Danish","Djibouti","Dominican","Dutch","East Timorese","Ecuadorean","Egyptian","Emirian","Equatorial Guinean","Eritrean","Estonian","Ethiopian","Fijian","Filipino","Finnish","French","Gabonese","Gambian","Georgian","German","Ghanaian","Greek","Grenadian","Guatemalan","Guinea-Bissauan","Guinean","Guyanese","Haitian","Herzegovinian","Honduran","Hungarian","I-Kiribati","Icelander","Indian","Indonesian","Iranian","Iraqi","Irish","Israeli","Italian","Ivorian","Jamaican","Japanese","Jordanian","Kazakhstani","Kenyan","Kittian and Nevisian","Kuwaiti","Kyrgyz","Laotian","Latvian","Lebanese","Liberian","Libyan","Liechtensteiner","Lithuanian","Luxembourger","Macedonian","Malagasy","Malawian","Malaysian","Maldivan","Malian","Maltese","Marshallese","Mauritanian","Mauritian","Mexican","Micronesian","Moldovan","Monacan","Mongolian","Moroccan","Mosotho","Motswana","Mozambican","Namibian","Nauruan","Nepalese","New Zealander","Ni-Vanuatu","Nicaraguan","Nigerian","Nigerien","North Korean","Northern Irish","Norwegian","Omani","Pakistani","Palauan","Panamanian","Papua New Guinean","Paraguayan","Peruvian","Polish","Portuguese","Qatari","Romanian","Russian","Rwandan","Saint Lucian","Salvadoran","Samoan","San Marinese","Sao Tomean","Saudi","Scottish","Senegalese","Serbian","Seychellois","Sierra Leonean","Singaporean","Slovakian","Slovenian","Solomon Islander","Somali","South African","South Korean","Spanish","Sri Lankan","Sudanese","Surinamer","Swazi","Swedish","Swiss","Syrian","Taiwanese","Tajik","Tanzanian","Thai","Togolese","Tongan","Trinidadian or Tobagonian","Tunisian","Turkish","Tuvaluan","Ugandan","Ukrainian","Uruguayan","Uzbekistani","Venezuelan","Vietnamese","Welsh","Yemenite","Zambian","Zimbabwean"],{data:o,setData:n,put:f,processing:g,errors:t}=N({full_name:r.full_name||"",email:r.email||"",phone:r.phone||"",nationality:r.nationality||"",passport_no:r.passport_no||"",profile_image:null,passport_id_document:null,course_ids:[]});d.useEffect(()=>{fetch("/api/courses").then(a=>a.json()).then(a=>{x(a.data||[])}).catch(a=>{console.error("Error fetching courses:",a)}),fetch(`/api/participants/${r.id}/enrollments`).then(a=>a.json()).then(a=>{const i=a.data.map(s=>s.course_id);n("course_ids",i),h(a.data)}).catch(a=>{console.error("Error fetching enrollments:",a)})},[r.id]);const p=a=>{const i=a.target.files[0];if(i){n("profile_image",i);const s=new FileReader;s.onloadend=()=>{u(s.result)},s.readAsDataURL(i)}},y=a=>{const i=a.target.files[0];i&&n("passport_id_document",i)},j=a=>{a.preventDefault(),f(route("participants.update",r.id))};return e.jsxs(w,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:["✏️ Edit Participant: ",r.full_name]}),e.jsx(l,{href:route("participants.show",r.id),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"← Back to Details"})]}),children:[e.jsx(v,{title:"Edit Participant"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsx("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"📸 Profile Image"}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"flex-shrink-0",children:m?e.jsx("img",{src:m,alt:"Preview",className:"h-24 w-24 rounded-full object-cover border-2 border-gray-300"}):e.jsx("div",{className:"h-24 w-24 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 text-2xl",children:"👤"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"profile_image",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Update Profile Image"}),e.jsx("input",{type:"file",id:"profile_image",accept:"image/*",onChange:p,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900 dark:file:text-indigo-300"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"JPG, PNG, GIF up to 5MB. Leave empty to keep current image."}),t.profile_image&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.profile_image})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"📄 Passport/ID Document"}),e.jsxs("div",{className:"space-y-4",children:[r.passport_id_document_url&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Document"}),e.jsx(l,{href:r.passport_id_document_url,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"📎 View Current Document"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload New Document"}),e.jsx("input",{type:"file",onChange:y,accept:".pdf,.jpg,.jpeg,.png,.gif,.doc,.docx",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white dark:focus:ring-indigo-600 dark:focus:border-indigo-600"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Accepted formats: PDF, JPG, PNG, GIF, DOC, DOCX (Max: 10MB)"})]})]}),t.passport_id_document&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.passport_id_document})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"📚 Manage Course Enrollments"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Courses"}),e.jsx("select",{multiple:!0,value:o.course_ids,onChange:a=>{const i=Array.from(a.target.selectedOptions,s=>parseInt(s.value));n("course_ids",i)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-white dark:focus:ring-indigo-600 dark:focus:border-indigo-600",size:"4",children:c.map(a=>e.jsxs("option",{value:a.id,children:[a.name," -"," ",a.code||"No Code"]},a.id))}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Hold Ctrl (or Cmd on Mac) to select multiple courses"})]}),o.course_ids.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Selected Courses:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.course_ids.map(a=>{const i=c.find(s=>s.id===a);return i?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",children:[i.name,e.jsx("button",{type:"button",onClick:()=>{const s=o.course_ids.filter(k=>k!==a);n("course_ids",s)},className:"ml-1.5 inline-flex items-center justify-center w-4 h-4 rounded-full text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500 dark:hover:bg-indigo-800 dark:hover:text-indigo-300",children:"×"})]},a):null})})]})]}),t.course_ids&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.course_ids})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"📋 Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name *"}),e.jsx("input",{type:"text",id:"full_name",value:o.full_name,onChange:a=>n("full_name",a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm shadow-sm",required:!0}),t.full_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.full_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Address *"}),e.jsx("input",{type:"email",id:"email",value:o.email,onChange:a=>n("email",a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm shadow-sm",required:!0}),t.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",value:o.phone,onChange:a=>n("phone",a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm shadow-sm"}),t.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.phone})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"🛂 Travel Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nationality",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nationality *"}),e.jsxs("select",{id:"nationality",value:o.nationality,onChange:a=>n("nationality",a.target.value),className:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Nationality"}),b.map(a=>e.jsx("option",{value:a,children:a},a))]}),t.nationality&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.nationality})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"passport_no",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"ID/Passport Number *"}),e.jsx("input",{type:"text",id:"passport_no",value:o.passport_no,onChange:a=>n("passport_no",a.target.value),placeholder:"National ID or Passport Number",className:"mt-1 block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white sm:text-sm shadow-sm",required:!0}),t.passport_no&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.passport_no})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"visa_status",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Visa Status"}),e.jsxs("div",{className:"mt-1 p-3 bg-gray-100 dark:bg-gray-600 rounded-md",children:[e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["💡"," ",e.jsx("strong",{children:"Automatic:"})," ","Visa status is automatically determined based on nationality."]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["🇪🇬"," ",e.jsx("strong",{children:"Egyptian:"})," ","Not Required"]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["🌍"," ",e.jsx("strong",{children:"Other Nationalities:"})," ","Required"]}),r.nationality&&e.jsxs("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 mt-2",children:["Current:"," ",r.nationality," ","→"," ",r.nationality.toLowerCase()==="egyptian"?"Not Required":"Required"]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(l,{href:route("participants.show",r.id),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:g?"Updating...":"Update Participant"})]})]})})})})})]})}export{B as default};
