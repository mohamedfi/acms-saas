import{r as c,u as W,j as e,H as z}from"./app-CLn2vjWe.js";import{A as K}from"./AuthenticatedLayout-1MlMfRJ1.js";import{I as b}from"./InputError-Bf2oPRln.js";import{I as p}from"./InputLabel-BSwXL-w6.js";import{T as f}from"./TextInput-uNskRfKQ.js";import{P as X}from"./PrimaryButton-iFLbmwiG.js";import"./ApplicationLogo-BPMxEZeD.js";import"./transition-DgcvbT3p.js";function re(){const[i,j]=c.useState([]),[v,F]=c.useState([]),[E,$]=c.useState([]),[k,T]=c.useState(!1),[u,B]=c.useState(null),[n,I]=c.useState(7),[M,N]=c.useState([]),[L,w]=c.useState([]),R=c.useRef(null),q=(t,a)=>{const d=[],l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if(!a)return d;for(let r=0;r<t;r++){const o=new Date(a);o.setDate(o.getDate()+r);const g=l[o.getDay()],y=o.toLocaleDateString("en-US",{month:"short",day:"numeric"});d.push({id:r+1,name:`Day ${r+1}`,dayName:g,date:y,fullDate:o.toISOString().split("T")[0]})}return d},{data:s,setData:x,post:O,processing:_,errors:h}=W({name:"",description:"",start_date:"",end_date:"",notes:"",employee_id:"",department_id:"",total_food_cost:0,total_delivery_cost:0,grand_total:0,items:[]});c.useEffect(()=>{const t=new Date,a=new Date(t);a.setDate(t.getDate()+n-1),x({...s,start_date:t.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0]}),D(n)},[n]),c.useEffect(()=>{(async()=>{var a;try{const d=(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"),l=window.location.origin+"/pmec2/public",r=await fetch(`${l}/api/employees`,{headers:{"X-CSRF-TOKEN":d,Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin"});if(!r.ok)throw new Error(`Employees API error: ${r.status}`);const o=await r.json();N(o.data||[]);const g=await fetch(`${l}/api/departments`,{headers:{"X-CSRF-TOKEN":d,Accept:"application/json","Content-Type":"application/json"},credentials:"same-origin"});if(!g.ok)throw new Error(`Departments API error: ${g.status}`);const y=await g.json();w(y.data||[])}catch(d){console.error("Error fetching data:",d),N([]),w([])}})()},[]),c.useEffect(()=>{s.start_date&&n&&D(n)},[s.start_date]);const D=t=>{const a=["Breakfast","Lunch","Dinner"],d=q(t,s.start_date),l=[];d.forEach((r,o)=>{a.forEach((g,y)=>{l.push({id:`${o+1}-${y+1}`,name:"",cost:"",delivery_cost:"",location:"",department:"",course_id:"",quantity:1,supplier:"",day:r,meal_type:g,participants:0,special_requirements:"",meal_order:y+1})})}),j(l),$(d)},C=(t,a)=>{if(!t||!a)return"";const d=new Date(t);return d.setDate(d.getDate()+a-1),d.toISOString().split("T")[0]};c.useEffect(()=>{(async()=>{try{const a=window.location.origin+"/pmec2/public",d=await fetch(`${a}/api/courses`);if(d.ok){const l=await d.json();F(l.data||[])}}catch(a){console.error("Error fetching courses:",a)}})()},[]);const m=(t,a,d)=>{const l=[...i];if(l[t][a]=d,a==="course_id"){const r=v.find(o=>o.id==d);r&&(l[t].name=r.name)}j(l),G(l)},G=t=>{const a=t.reduce((r,o)=>{const g=(parseFloat(o.cost)||0)*(parseInt(o.quantity)||1);return r+g},0),d=t.reduce((r,o)=>r+(parseFloat(o.delivery_cost)||0),0),l=a+d;x("total_food_cost",a),x("total_delivery_cost",d),x("grand_total",l),x("items",t)},A=()=>{const t={planName:s.name,period:`${s.start_date} to ${s.end_date}`,totalDays:n,totalMeals:n*3,totalFoodCost:s.total_food_cost,totalDeliveryCost:s.total_delivery_cost,grandTotal:s.grand_total,dailyBreakdown:i.map(a=>({day:a.day.name,meal:a.meal_type,course:a.name,participants:a.participants,cost:(parseFloat(a.cost)||0)*(parseInt(a.quantity)||1),delivery:parseFloat(a.delivery_cost)||0,supplier:a.supplier,location:a.location,department:a.department})),summary:{totalParticipants:i.reduce((a,d)=>a+(parseInt(d.participants)||0),0),averageDailyCost:s.grand_total/n,mostExpensiveDay:i.reduce((a,d)=>{const l=(parseFloat(d.cost)||0)*(parseInt(d.quantity)||1)+(parseFloat(d.delivery_cost)||0);return l>a.cost?{day:d.day.name,cost:l}:a},{day:"",cost:0}),suppliers:[...new Set(i.map(a=>a.supplier).filter(Boolean))],locations:[...new Set(i.map(a=>a.location).filter(Boolean))],departments:[...new Set(i.map(a=>a.department).filter(Boolean))]}};B(t),T(!0)},U=async()=>{if(R.current)try{const t=`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>${s.name} - Meal Break Plan Report</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }
                        .summary { background: #f5f5f5; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
                        .daily-breakdown { margin-bottom: 30px; }
                        .day-card { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 5px; }
                        .cost-highlight { color: #e53e3e; font-weight: bold; }
                        .supplier-info { background: #e6fffa; padding: 10px; border-radius: 5px; margin-top: 10px; }
                        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                        th { background: #f8f9fa; }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>üçΩÔ∏è ${s.name}</h1>
                        <h2>Meal Break Plan Report</h2>
                        <p><strong>Period:</strong> ${s.start_date} to ${s.end_date}</p>
                        <p><strong>Total Days:</strong> {numberOfDays}</p>
                <p><strong>Total Meals:</strong> {numberOfDays * 3} (3 meals per day)</p>
                    </div>

                    <div class="summary">
                        <h3>üìä Financial Summary</h3>
                        <table>
                            <tr><th>Category</th><th>Amount (EGP)</th></tr>
                            <tr><td>Total Food Cost</td><td class="cost-highlight">${s.total_food_cost.toFixed(2)}</td></tr>
                            <tr><td>Total Delivery Cost</td><td class="cost-highlight">${s.total_delivery_cost.toFixed(2)}</td></tr>
                            <tr><td><strong>Grand Total</strong></td><td class="cost-highlight"><strong>${s.grand_total.toFixed(2)}</strong></td></tr>
                        </table>
                    </div>

                    <div class="daily-breakdown">
                        <h3>üìÖ Daily Breakdown</h3>
                        ${i.map(r=>`
                            <div class="day-card">
                                <h4>${r.day} - ${r.meal_type}</h4>
                                <p><strong>Course:</strong> ${r.name||"Not specified"}</p>
                                <p><strong>Participants:</strong> ${r.participants||0}</p>
                                <p><strong>Cost:</strong> EGP ${((parseFloat(r.cost)||0)*(parseInt(r.quantity)||1)).toFixed(2)}</p>
                                <p><strong>Delivery:</strong> EGP ${(parseFloat(r.delivery_cost)||0).toFixed(2)}</p>
                                <div class="supplier-info">
                                    <p><strong>Supplier:</strong> ${r.supplier||"Not specified"}</p>
                                    <p><strong>Location:</strong> ${r.location||"Not specified"}</p>
                                    <p><strong>Department:</strong> ${r.department||"Not specified"}</p>
                                </div>
                            </div>
                        `).join("")}
                    </div>

                    <div class="summary">
                        <h3>üìà Plan Statistics</h3>
                        <p><strong>Total Participants:</strong> ${i.reduce((r,o)=>r+(parseInt(o.participants)||0),0)}</p>
                        <p><strong>Average Daily Cost:</strong> EGP ${(s.grand_total/n).toFixed(2)}</p>
                        <p><strong>Average Meal Cost:</strong> EGP ${(s.grand_total/(n*3)).toFixed(2)}</p>
                        <p><strong>Most Expensive Day:</strong> ${i.reduce((r,o)=>(parseFloat(o.cost)||0)*(parseInt(o.quantity)||1)+(parseFloat(o.delivery_cost)||0)>r.cost?o.day:r.day,"")}</p>
                    </div>

                    <div class="summary">
                        <h3>üìù Notes</h3>
                        <p>${s.notes||"No additional notes provided."}</p>
                    </div>

                    <div style="text-align: center; margin-top: 40px; color: #666;">
                        <p>Report generated on ${new Date().toLocaleDateString()}</p>
                    </div>
                </body>
                </html>
            `,a=new Blob([t],{type:"text/html"}),d=window.URL.createObjectURL(a),l=document.createElement("a");l.href=d,l.download=`${s.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_meal_plan_report.html`,document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(d),document.body.removeChild(l)}catch(t){console.error("Error generating report:",t),alert("Error generating report. Please try again.")}},H=t=>{t.preventDefault(),O("/pmec2/public/catering/meal-break-plans")},S=t=>({1:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg",2:"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg",3:"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg",4:"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-lg",5:"bg-gradient-to-r from-pink-500 to-pink-600 text-white shadow-lg",6:"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-lg",7:"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg",8:"bg-gradient-to-r from-teal-500 to-teal-600 text-white shadow-lg",9:"bg-gradient-to-r from-amber-500 to-amber-600 text-white shadow-lg",10:"bg-gradient-to-r from-rose-500 to-rose-600 text-white shadow-lg"})[t.id]||"bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-lg",P=t=>({Breakfast:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white shadow-lg font-semibold",Lunch:"bg-gradient-to-r from-green-400 to-emerald-500 text-white shadow-lg font-semibold",Dinner:"bg-gradient-to-r from-purple-400 to-indigo-500 text-white shadow-lg font-semibold",Snack:"bg-gradient-to-r from-teal-400 to-cyan-500 text-white shadow-lg font-semibold"})[t]||"bg-gray-500 text-white shadow-lg";return e.jsxs(K,{children:[e.jsx(z,{title:"Create 7-Day Meal Break Plan"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"üóìÔ∏è Create Dynamic Meal Break Plan"}),e.jsx("a",{href:"/pmec2/public/catering/meal-break-plans",className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100",children:"‚Üê Back to Plans"})]}),e.jsxs("form",{onSubmit:H,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4 text-blue-800 dark:text-blue-200",children:"üìã Basic Plan Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"name",value:"Plan Name"}),e.jsx(f,{id:"name",type:"text",name:"name",value:s.name,className:"mt-1 block w-full",onChange:t=>x("name",t.target.value),placeholder:"e.g., Weekly Training Meal Plan - August 2025",required:!0}),e.jsx(b,{message:h.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"description",value:"Description (Optional)"}),e.jsx(f,{id:"description",type:"text",name:"description",value:s.description,className:"mt-1 block w-full",onChange:t=>x("description",t.target.value),placeholder:"Brief description of the weekly plan"}),e.jsx(b,{message:h.description,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"employee_id",value:"Responsible Employee"}),e.jsxs("select",{id:"employee_id",name:"employee_id",value:s.employee_id,className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:t=>x("employee_id",t.target.value),children:[e.jsx("option",{value:"",children:"Select an employee"}),M.map(t=>e.jsxs("option",{value:t.id,children:[t.full_name," -"," ",t.position]},t.id))]}),e.jsx(b,{message:h.employee_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"department_id",value:"Department"}),e.jsxs("select",{id:"department_id",name:"department_id",value:s.department_id,className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:t=>x("department_id",t.target.value),children:[e.jsx("option",{value:"",children:"Select a department"}),L.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(b,{message:h.department_id,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"number_of_days",value:"Number of Days"}),e.jsx(f,{id:"number_of_days",type:"number",name:"number_of_days",value:n,className:"mt-1 block w-full",onChange:t=>{const a=parseInt(t.target.value)||1;I(Math.max(1,Math.min(30,a)))},min:"1",max:"30",required:!0}),e.jsx("div",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Choose 1-30 days for your meal plan"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"start_date",value:"Start Date"}),e.jsx(f,{id:"start_date",type:"date",name:"start_date",value:s.start_date,className:"mt-1 block w-full",onChange:t=>x("start_date",t.target.value),required:!0}),e.jsx(b,{message:h.start_date,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"end_date",value:"End Date"}),e.jsx(f,{id:"end_date",type:"date",name:"end_date",value:C(s.start_date,n),className:"mt-1 block w-full",readOnly:!0}),s.start_date&&n&&e.jsxs("div",{className:"mt-1 text-sm text-green-600 dark:text-green-400",children:["üìÖ ",n,"-day period:"," ",s.start_date," to"," ",C(s.start_date,n)]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6 text-green-800 dark:text-green-200",children:"üçΩÔ∏è Dynamic Meal Plan Structure"}),e.jsx("div",{className:"space-y-6",children:E.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border-2 border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:`text-center mb-4 p-3 rounded-lg ${S(t)}`,children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:t.name}),e.jsxs("div",{className:"text-sm opacity-90",children:[t.dayName," ‚Ä¢"," ",t.date]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.filter(a=>a.day.id===t.id).sort((a,d)=>a.meal_order-d.meal_order).map((a,d)=>{const l=i.findIndex(r=>r.id===a.id);return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:`text-center mb-3 p-2 rounded-lg ${P(a.meal_type)}`,children:e.jsx("h4",{className:"font-bold text-sm",children:a.meal_type})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meal Type"}),e.jsxs("select",{value:a.meal_type,onChange:r=>m(l,"meal_type",r.target.value),className:"w-full text-xs border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100 rounded-md",children:[e.jsx("option",{value:"Breakfast",children:"Breakfast"}),e.jsx("option",{value:"Lunch",children:"Lunch"}),e.jsx("option",{value:"Dinner",children:"Dinner"}),e.jsx("option",{value:"Snack",children:"Snack"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Course"}),e.jsxs("select",{value:a.course_id,onChange:r=>m(l,"course_id",r.target.value),className:"w-full text-xs border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100 rounded-md",required:!0,children:[e.jsx("option",{value:"",children:"Select Course"}),v.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Participants"}),e.jsx("input",{type:"number",value:a.participants,onChange:r=>m(l,"participants",r.target.value),className:"w-full text-xs border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100 rounded-md",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cost per Person (EGP)"}),e.jsx("input",{type:"number",value:a.cost,onChange:r=>m(l,"cost",r.target.value),className:"w-full text-xs border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100 rounded-md",placeholder:"0.00",step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Delivery Cost (EGP)"}),e.jsx("input",{type:"number",value:a.delivery_cost,onChange:r=>m(l,"delivery_cost",r.target.value),className:"w-full text-xs border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100 rounded-md",placeholder:"0.00",step:"0.01",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Supplier"}),e.jsx("input",{type:"text",value:a.supplier,onChange:r=>m(l,"supplier",r.target.value),className:"w-full text-xs border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100 rounded-md",placeholder:"Restaurant/Catering"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),e.jsxs("select",{value:a.location,onChange:r=>m(l,"location",r.target.value),className:"w-full text-xs border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100 rounded-md",children:[e.jsx("option",{value:"",children:"Select Location"}),e.jsx("option",{value:"ŸÖŸÉÿßŸÜŸÉ ÿ•ÿ≥ŸÉŸÜÿØÿ±Ÿäÿ©",children:"ŸÖŸÉÿßŸÜŸÉ ÿ•ÿ≥ŸÉŸÜÿØÿ±Ÿäÿ©"}),e.jsx("option",{value:"ŸÖŸÉÿßŸÜŸÉ ŸÖÿØŸäŸÜÿ© ŸÜÿµÿ±",children:"ŸÖŸÉÿßŸÜŸÉ ŸÖÿØŸäŸÜÿ© ŸÜÿµÿ±"}),e.jsx("option",{value:"ÿßŸÑÿØŸÇŸä",children:"ÿßŸÑÿØŸÇŸä"}),e.jsx("option",{value:"ÿßŸÑÿ±ÿ≠ÿßÿ®",children:"ÿßŸÑÿ±ÿ≠ÿßÿ®"}),e.jsx("option",{value:"Business Square",children:"Business Square"}),e.jsx("option",{value:"BDC",children:"BDC"}),e.jsx("option",{value:"ÿßŸÑÿ∑ÿßÿ±ŸÇ ÿßŸÑÿπŸÑŸä",children:"ÿßŸÑÿ∑ÿßÿ±ŸÇ ÿßŸÑÿπŸÑŸä"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Department"}),e.jsxs("select",{value:a.department,onChange:r=>m(l,"department",r.target.value),className:"w-full text-xs border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100 rounded-md",children:[e.jsx("option",{value:"",children:"Select Department"}),e.jsx("option",{value:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸàÿßÿ±ÿØ",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸàÿßÿ±ÿØ"}),e.jsx("option",{value:"ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπÿßÿ™",children:"ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπÿßÿ™"}),e.jsx("option",{value:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸàÿßÿØ",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸàÿßÿØ"}),e.jsx("option",{value:"ÿßŸÑÿ™ŸÖÿ±Ÿäÿ∂",children:"ÿßŸÑÿ™ŸÖÿ±Ÿäÿ∂"}),e.jsx("option",{value:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπÿßÿ™",children:"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπÿßÿ™"}),e.jsx("option",{value:"ÿ™ŸÜŸÖŸäÿ© ŸÖŸáÿßÿ±ÿßÿ™ ŸàÿßÿØÿßÿ±Ÿäÿ©",children:"ÿ™ŸÜŸÖŸäÿ© ŸÖŸáÿßÿ±ÿßÿ™ ŸàÿßÿØÿßÿ±Ÿäÿ©"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Special Requirements"}),e.jsx("textarea",{value:a.special_requirements,onChange:r=>m(l,"special_requirements",r.target.value),className:"w-full text-xs border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100 rounded-md",placeholder:"Dietary restrictions, allergies...",rows:"2"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-2 rounded text-center",children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Meal Total"}),e.jsxs("div",{className:"font-bold text-green-600 dark:text-green-400",children:["EGP"," ",((parseFloat(a.cost)||0)*(parseInt(a.participants)||0)+(parseFloat(a.delivery_cost)||0)).toFixed(2)]})]})]})]},a.id)})})]},t))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6 text-purple-800 dark:text-purple-200",children:"üí∞ Financial Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg text-center border-2 border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["EGP"," ",s.total_food_cost.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Food Cost"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg text-center border-2 border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["EGP"," ",s.total_delivery_cost.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Delivery Cost"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg text-center border-2 border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:["EGP"," ",s.grand_total.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Grand Total"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg text-center border-2 border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:["EGP"," ",(s.grand_total/(n*3)).toFixed(2)]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Meal Average (",n*3," ","meals)"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx(p,{htmlFor:"notes",value:"Additional Notes (Optional)"}),e.jsx("textarea",{id:"notes",name:"notes",value:s.notes,className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",rows:"4",onChange:t=>x("notes",t.target.value),placeholder:"Additional notes, special instructions, dietary requirements, or any other relevant information..."}),e.jsx(b,{message:h.notes,className:"mt-2"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:A,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg transition-colors",children:"üìä Generate Report & Charts"}),k&&e.jsx("button",{type:"button",onClick:U,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"üì• Download Report"})]}),e.jsx(X,{className:"ml-4",disabled:_||!s.name||!s.start_date||!s.end_date||i.length===0,children:_?"Creating...":"Create Meal Break Plan"})]})]}),k&&u&&e.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-lg p-6 border-2 border-blue-200 dark:border-blue-800",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6 text-blue-800 dark:text-blue-200",children:"üìä Plan Analysis & Charts"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-3 text-center",children:"Daily Cost Breakdown"}),e.jsx("div",{className:"h-64 flex items-end justify-center space-x-2",children:u.dailyBreakdown.filter((t,a)=>a%3===0).map((t,a)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-8 bg-blue-500 rounded-t",style:{height:`${(t.cost+t.delivery)/u.grandTotal*200}px`}}),e.jsxs("div",{className:"text-xs mt-2 text-center",children:[e.jsx("div",{className:"font-medium",children:t.day}),e.jsxs("div",{className:"text-blue-600",children:["EGP"," ",(t.cost+t.delivery).toFixed(2)]})]})]},a))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-3 text-center",children:"Meal Type Distribution"}),e.jsx("div",{className:"space-y-3",children:["Breakfast","Lunch","Dinner","Snack"].map(t=>{const a=i.filter(l=>l.meal_type===t).length,d=a/7*100;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:t}),e.jsx("div",{className:"flex-1 mx-3",children:e.jsx("div",{className:"bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${d}%`}})})}),e.jsxs("span",{className:"text-sm font-medium",children:[a,"/7"]})]},t)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:u.summary.totalParticipants}),e.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Total Participants"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:u.summary.suppliers.length}),e.jsx("div",{className:"text-sm text-green-800 dark:text-green-200",children:"Unique Suppliers"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:u.summary.locations.length}),e.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-200",children:"Locations"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white dark:bg-gray-800 rounded-lg overflow-hidden",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Day"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Meal"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Course"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Participants"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Supplier"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:u.dailyBreakdown.map((t,a)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(t.day)}`,children:t.day})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(t.meal)}`,children:t.meal})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100",children:t.course||"Not specified"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100",children:t.participants}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-green-600 dark:text-green-400",children:["EGP"," ",(t.cost+t.delivery).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 dark:text-gray-100",children:t.supplier||"Not specified"})]},a))})]})})]}),e.jsxs("div",{className:"mt-8 bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"üí° How the Dynamic Meal Plan Works"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"1. Flexible Duration:"})," ","Choose 1-30 days for your meal plan (currently ",n," days)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"2. Smart Date Calculation:"})," ","System automatically calculates end date and shows day names with dates"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"3. Structured Planning:"})," ","Plan 3 meals (Breakfast, Lunch, Dinner) plus optional Snacks for each day of your chosen period"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"4. Comprehensive Details:"})," ","Include course, participants, costs, suppliers, locations, and departments for each meal"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"5. Automatic Calculations:"})," ","System calculates meal, daily, and total costs automatically"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"6. Visual Reports:"})," ","Generate charts and reports to analyze your meal plan patterns"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"7. Download Options:"})," ","Export your plan as an HTML report for sharing with stakeholders"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"8. Cost Tracking:"})," ","Monitor food costs, delivery costs, and total expenses per meal and per day"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"9. Meal Organization:"})," ","Each day shows Breakfast, Lunch, and Dinner with individual settings"]})]})]})]})})})})]})}export{re as default};
